<!DOCTYPE html>
<html lang="ko">
<head>
    <title>ë©ì´ì™€ ë‚˜ğŸ¶</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">

    <style>
        * {
            font-size: 15px;
        }

        h1 {
            font-family: 'Gamja Flower', cursive;
            display: inline;
            font-size: 50px;
        }

        table {
            table-layout: fixed;
            word-break: break-all;
            border: 1px solid darkgray;
        }

        th, td {
            border: 1px solid darkgray;
            padding: 10px;
        }

        .icon {
            width: 50px;
            height: 50px;
            margin: 10px 30px;
        }

        .wrap {
            margin: 10px auto;
            padding: 30px;
            width: 600px;
            text-align: center;
            border: solid black;
        }

        .schedule {
            margin: 15px;
            padding: 10px;
            border: 3px darkgray double;
        }

        .schedule_date {
            font-weight: bolder;
            padding: 10px;
            text-align: left;
        }

        #title {
            margin: 30px;
        }

        #title_footer, #input_schedule {
            border: dashed black 1px;
            padding: 15px;
            margin: 10px;
        }

        #doggo_icon {
            width: 70px;
            height: 70px;
            float: left;
        }

        #user_icon {
            float: right;
        }

        #month {
            font-weight: bold;
            font-size: 30px;
        }

        /*#input_schedule {
            display: none;
        } */

    </style>
    <script>
        $(document).ready(function () {
            show_date()
            show_month()
            show_day()
            readsche()
        });

        function show_month() {
            let today = new Date()
            let month = today.getMonth() + 1;
            $('#month').append(month + 'ì›”');
        }

        function show_date() {
            let today = new Date();
            let year = today.getFullYear();
            let month = today.getMonth() + 1;
            let date = today.getDate();
            $('#date').append(year + 'ë…„ ' + month + 'ì›” ' + date + 'ì¼');
        }

        function show_day() {
            let today = new Date();
            let day = today.getDay();
            if (day == 0) {
                $('#day').append('ì¼ìš”ì¼')
            } else if (day == 1) {
                $('#day').append('ì›”ìš”ì¼')
            } else if (day == 2) {
                $('#day').append('í™”ìš”ì¼')
            } else if (day == 3) {
                $('#day').append('ìˆ˜ìš”ì¼')
            } else if (day == 4) {
                $('#day').append('ëª©ìš”ì¼')
            } else if (day == 5) {
                $('#day').append('ê¸ˆìš”ì¼')
            } else if (day == 6) {
                $('#day').append('í† ìš”ì¼')
            }
        }

        function open_close() {
            if ($('#input_schedule').css('display') == 'block') {
                $('#input_schedule').hide();
            } else {
                $('#input_schedule').show();
            }
        }

        function show_1day() {
            $('#day_layout').show();
            $('#week_layout').hide();
            $('#month_layout').hide();
        }

        function show_7day() {
            $('#day_layout').hide();
            $('#week_layout').show();
            $('#month_layout').hide();
        }

        function show_30day() {
            $('#day_layout').hide();
            $('#week_layout').hide();
            $('#month_layout').show();
        }

        ////////////API ì—­í• ì„ í•˜ëŠ” ë¶€ë¶„
        //1. ì¼ì • ìƒì„±(Create) - /makesche (POST)
        function makesche() {
            let todo = $('#todo').val();
            let start_date = $('#start_date').val();
            let start_time = $('#start_time').val();
            let end_date = $('#end_date').val();
            let end_time = $('#end_time').val();
            let startend = $('#startend').val();
            let alert1_day = $('#alert_1_day').val();
            let alert1_time = $('#alert_1_time').val();
            // ì•Œë¦¼1-ì¹´í†¡/ì´ë©”ì¼ì•Œë¦¼ì—¬ë¶€
            let alert2_day = $('#alert_2_day option:selected').val();
            let alert2_time = $('#alert_2_time').val();
            // ì•Œë¦¼2-ì¹´í†¡/ì´ë©”ì¼ì•Œë¦¼ì—¬ë¶€
            let memo = $('#memo').val();
            $.ajax({
                type: "POST",
                url: "/makesche",
                data: {
                    'todo': todo,
                    'start_date': start_date,
                    'start_time': start_time,
                    'end_date': end_date,
                    'end_time': end_time,
                    'startend': startend,
                    'alert1_day': alert1_day,
                    'alert1_time': alert1_time,
                    'alert2_day': alert2_day,
                    'alert2_time': alert2_time,
                    'memo': memo
                },
                success: function (response) { // ì„±ê³µí•˜ë©´
                    if (response["result"] == "success") {
                        alert(response["msg"]);
                        // window.location.reload();
                    } else {
                        alert('ì„œë²„ ì˜¤ë¥˜!')
                    }
                    window.location.reload();
                }
            })
        }

        //2. ì¼ì • ì¡°íšŒ(Read) - /readsche (GET)
        function readsche() {
            $('#day_layout').empty();
            $.ajax({
                type: "GET",
                url: '/readsche',
                data: {},
                success: function (response) {
                    let todolist = response['todolist'];
                    for (i = 0; i < todolist.length; i++) {
                        let todo = `<div class="schedule">
                                                <div class="schedule_date">${todolist[i]['start_date']}~${todolist[i]['end_date']}</div>
                                                <li>(${todolist[i]['start_time']}~${todolist[i]['end_time']})${todolist[i]['todo']}</li>${todolist[i]['memo']}
                                            </div>`
                        $('#day_layout').append(todo);
                    }
                }
            })
        }

        //3. ì¼ì • ê²€ìƒ‰(Read?) - /findsche (GET)
        //4. ì¼ì • ë³€ê²½(Update) - /fixsche (POST)
        //5. ì¼ì • ì‚­ì œ(Delete) - /delsche(POST)
        //6. ì•Œë¦¼ ë³´ë‚´ê¸°?
        ///////////ìœ„ì˜ ê²ƒë“¤ ë‹¤ í–ˆë‹¤ë©´
        //7. ë‚ ì”¨ ì¡°íšŒ /wether (GET)
        //8. íšŒì›ì‹œìŠ¤í…œ ì‹œì‘

    </script>
</head>
<body>
<div class="wrap">

    <div id="title">
        <img id="doggo_icon" class="icon" src="../static/Doggo_icon.png" alt="ì•„ì´ì½˜ ì´ë¯¸ì§€">
        <h1>ë©ì´ì™€ ë‚˜</h1>
        <img id="user_icon" class="icon" src="../static/user_icon.png" alt="ì•„ì´ì½˜ ì´ë¯¸ì§€">
        <br><br><br>
        <div id="title_footer">
            ì˜¤ëŠ˜ì€ <span id="date"></span>, <span id="day"></span>ì´ì—ìš”.<br>
            ì˜¤ëŠ˜ì€ ë¹„ê°€ ì˜¤ë‹ˆ ìš°ì‚°ì„ ê¼­ ì±™ê²¨ ë‹¤ë…€ìš”. ë©ë©!ğŸ¶
        </div>
        <button onclick="open_close()" id="btn-new-sche" type="button">ì¼ì •ì„ ì ì–´ì£¼ì„¸ìš”ğŸ“
        </button>
        <div id="input_schedule">

            <h3>ğŸ¶ì–´ë–¤ ì¼ì •ì„ ì ì–´ë‘˜ê¹Œìš”?</h3><br>
            <input type="text" width="300px" id="todo" placeholder="ë©ë©! í•  ì¼ì´ ë­”ê°€ìš”?"><br><br>
            ì–¸ì œë¶€í„° í•´ì•¼ í•˜ë‚˜ìš”?(ì‹œì‘ì¼)<br>
            <input type="date" id="start_date"><input type="time" id="start_time"> <br><br>
            ì–¸ì œê¹Œì§€ í•´ì•¼ í•˜ë‚˜ìš”?(ì¢…ë£Œì¼)<br>
            <input type="date" id="end_date"><input type="time" id="end_time"><br>
            ì¢…ì¼!(ì‹œì‘ì¼=ì¢…ë£Œì¼)<input type="checkbox" id="startend"><br><br>
            <h3>ğŸ•ìŠì§€ ì•Šê²Œ ì•Œë ¤ë“œë¦´ê²Œìš”!</h3><br>
            <select id="alert_1_day">
                <option value="" selected disabled hidden>ì–¸ì œ ì•Œë ¤ë“œë¦´ê¹Œìš”?</option>
                <option value="on_day" id="">ìŠ¤ì¼€ì¤„ ë‹¹ì¼ì— ì•Œë ¤ì¤˜!</option>
                <option value="day_ago" id="">1ì¼ ì „ì— ì•Œë ¤ì¤˜!</option>
                <option value="3days_ago" id="">3ì¼ ì „ì— ì•Œë ¤ì¤˜!</option>
                <option value="week_ago" id="">1ì£¼ì¼ ì „ì— ì•Œë ¤ì¤˜!</option>
            </select>
            <input type="time" id="alert_1_time"><br>
            ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ ì•Œë¦¼ <input type="radio" name="alert_how" value="katalk">
            ì´ë©”ì¼ ì•Œë¦¼ <input type="radio" name="alert_how" value="email"><br><br>

            <select id="alert_2_day">
                <option value="" selected disabled hidden>í•œ ë²ˆ ë” ì•Œë ¤ë“œë¦´ê¹Œìš”?</option>
                <option value="on_day">ìŠ¤ì¼€ì¤„ ë‹¹ì¼ì— ì•Œë ¤ì¤˜!</option>
                <option value="day_ago">1ì¼ ì „ì— ì•Œë ¤ì¤˜!</option>
                <option value="3days_ago">3ì¼ ì „ì— ì•Œë ¤ì¤˜!</option>
                <option value="week_ago">1ì£¼ì¼ ì „ì— ì•Œë ¤ì¤˜!</option>
            </select>
            <input type="time" id="alert_2_time"><br>
            ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ ì•Œë¦¼ <input type="radio" name="alert_how" value="katalk">
            ì´ë©”ì¼ ì•Œë¦¼ <input type="radio" name="alert_how" value="email"><br><br>
            <textarea id="memo" placeholder="ë©”ëª¨ë¥¼ ë” ë‚¨ê¸¸ ìˆ˜ ìˆì–´ìš”. ë©!" cols="30" rows="5"></textarea><br><br>
            <input type="submit" onclick="makesche()" value="ì €ì¥!ğŸ¾">
        </div>
        <br>
        <a href="#" onclick="show_1day()"><img class="icon" src="../static/calendar_1.png" alt="1ì¼ ë ˆì´ì•„ì›ƒ ì•„ì´ì½˜"></a>
        <a href="#" onclick="show_7day()"><img class="icon" src="../static/calendar_7.png" alt="7ì¼ ë ˆì´ì•„ì›ƒ ì•„ì´ì½˜"></a>
        <a href="#" onclick="show_30day()"><img class="icon" src="../static/calendar_30.png" alt="30ì¼ ë ˆì´ì•„ì›ƒ ì•„ì´ì½˜"></a>
    </div>
    <div id="schedules">
        <div id="month"></div>
        <div id="day_layout">
            <div class="schedule">
                <div class="schedule_date">15ì¼ (í† )</div>
                <li>ìŠ¤íŒŒë¥´íƒ€ì½”ë”©í´ëŸ½ - í”„ë¡œì íŠ¸ ê³„íš ì§œê¸°!</li>
            </div>
            <div class="schedule">
                <div class="schedule_date">16ì¼ (ì¼)</div>
                <li>(21:00~)ì¹œêµ¬ë“¤ê³¼ ë†€ê¸°!</li>
            </div>
            <div class="schedule">
                <div class="schedule_date">18ì¼ (í™”)</div>
                <li>ì†Œê³ ê¸° ì‚¬ì˜¤ê¸°!</li>
            </div>
            <div class="schedule">
                <div class="schedule_date">19ì¼ (ìˆ˜)</div>
                <li>(19:30~22:30)ìŠ¤íŒŒë¥´íƒ€ì½”ë”©í´ëŸ½ - ìˆ˜ì—…</li>
            </div>
            <div class="schedule">
                <div class="schedule_date">20ì¼ (ëª©)</div>
                <li>ë°€ë¦° ì§‘ì•ˆì¼ í•˜ê¸° (ë¹¨ë˜,ì²­ì†Œ)</li>
                <li>ì´ë§ˆíŠ¸ì—ì„œ ì¥ ë´ì˜¤ê¸°</li>
            </div>
            <div class="schedule">
                <div class="schedule_date">31ì¼ (ì›”)</div>
                <li>ê³µí¬ì˜ 31ë°ì´..</li>
            </div>
        </div>
        <div id="week_layout">
            <table>
                <colgroup>
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                </colgroup>
                <thead>
                <tr>
                    <th id="month" colspan="7"></th>
                </tr>
                <tr>
                    <th>Sun(ì¼)</th>
                    <th>Mon(ì›”)</th>
                    <th>The(í™”)</th>
                    <th>Wed(ìˆ˜)</th>
                    <th>Thu(ëª©)</th>
                    <th>Fri(ê¸ˆ)</th>
                    <th>Sat(í† )</th>
                </tr>
                <tr>
                    <th>16ì¼</th>
                    <th>17ì¼</th>
                    <th>18ì¼</th>
                    <th>19ì¼</th>
                    <th>20ì¼</th>
                    <th>21ì¼</th>
                    <th>22ì¼</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <li>(21:00~)ì¹œêµ¬ë“¤ê³¼ ë†€ê¸°!</li>
                    </td>
                    <td>
                        <li></li>
                    </td>
                    <td>
                        <li>ì†Œê³ ê¸° ì‚¬ì˜¤ê¸°!</li>
                    </td>
                    <td>
                        <li>(19:30~22:30)ìŠ¤íŒŒë¥´íƒ€ì½”ë”©í´ëŸ½ - ìˆ˜ì—…</li>
                    </td>
                    <td>
                        <li>ë°€ë¦° ì§‘ì•ˆì¼ í•˜ê¸° (ë¹¨ë˜,ì²­ì†Œ)</li>
                        <li>ì´ë§ˆíŠ¸ì—ì„œ ì¥ ë´ì˜¤ê¸°</li>
                    </td>
                    <td>
                        <li></li>
                    </td>
                    <td>
                        <li></li>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div id="month_layout">
            <table id="schedules">
                <colgroup>
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                    <col width="14%">
                </colgroup>
                <thead>
                <tr>
                    <th id="month" colspan="7"></th>
                </tr>
                <tr>
                    <th>Sun(ì¼)</th>
                    <th>Mon(ì›”)</th>
                    <th>The(í™”)</th>
                    <th>Wed(ìˆ˜)</th>
                    <th>Thu(ëª©)</th>
                    <th>Fri(ê¸ˆ)</th>
                    <th>Sat(í† )</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                </tr>
                <tbody>
                <tr>
                    <td></td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                </tr>
                <tbody>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                    <td class="schedule_date"></td>
                </tr>
                <tbody>
                <tr>
                    <td>
                        <li>(21:00~)ì¹œêµ¬ë“¤ê³¼ ë†€ê¸°!</li>
                    </td>
                    <td>
                        <li></li>
                    </td>
                    <td>
                        <li>ì†Œê³ ê¸° ì‚¬ì˜¤ê¸°!</li>
                    </td>
                    <td>
                        <li>(19:30~22:30)ìŠ¤íŒŒë¥´íƒ€ì½”ë”©í´ëŸ½ - ìˆ˜ì—…</li>
                    </td>
                    <td>
                        <li>ë°€ë¦° ì§‘ì•ˆì¼ í•˜ê¸° (ë¹¨ë˜,ì²­ì†Œ)</li>
                        <li>ì´ë§ˆíŠ¸ì—ì„œ ì¥ ë´ì˜¤ê¸°</li>
                    </td>
                    <td>
                        <li></li>
                    </td>
                    <td>
                        <li></li>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>